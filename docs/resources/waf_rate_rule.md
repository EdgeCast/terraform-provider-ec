---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ec_waf_rate_rule Resource - terraform-provider-ec"
subcategory: ""
description: |-
  
---

# ec_waf_rate_rule (Resource)



## Example Usage

```terraform
resource "ec_waf_rate_rule" "rate_rule_1" {
  account_number = "<Account Number>"
  name           = "Rate Rule #1"
  duration_sec   = 1
  keys           = ["IP", "USER_AGENT"]
  disabled       = false
  num            = 10

  condition_group {
    id   = "group1"
    name = "Group 1"

    condition {
      target {
        type = "REMOTE_ADDR"
      }

      op {
        is_case_insensitive = false
        is_negated          = false
        type                = "IPMATCH"                  # only use op.type=IPMATCH when target.type=REMOTE_ADDR
        values              = ["10.10.2.3", "10.10.2.4"] # values array property is required when op.type=EM or op.type=IPMATCH
      }
    }

    condition {
      target {
        type = "REQUEST_METHOD"
      }

      op {
        is_case_insensitive = true
        is_negated          = true
        type                = "EM"
        values              = ["GET", "POST"] # values array property is required when op.type=EM or op.type=IPMATCH
      }
    }

    condition {
      target {
        type = "FILE_EXT"
      }

      op {
        is_case_insensitive = true
        is_negated          = false
        type                = "RX"
        value               = "(.*?)\\.(jpg|gif|doc|pdf)$" # value property is required when op.type=RX
      }
    }
  }
  
  condition_group {
    id   = "group2"
    name = "Group 2"

    condition {
      target {
        type  = "REQUEST_HEADERS"
        value = "User-Agent" # only valid when type=REQUEST_HEADERS. 
      }

      op {
        is_case_insensitive = true
        is_negated          = false
        type                = "EM"
        values              = ["Mozilla/5.0", "Chrome/91.0.4472.114"] # values array property is required when op.type=EM or op.type=IPMATCH
      }

    }
    condition {
      target {
        type = "REQUEST_URI"
      }

      op {
        is_case_insensitive = true
        is_negated          = false
        type                = "EM"
        values              = ["/marketing", "/800001/mycustomerorigin"] # values array property is required when op.type=EM or op.type=IPMATCH
      }

    }
  }

}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **duration_sec** (Number) Indicates the length, in seconds, of the rolling window that tracks the number of requests eligible for rate limiting. \
The rate limit formula is calculated through the num and duration_sec properties as indicated below. \
    `num` requests per `duration_sec` \
    Valid values are: \
    `1 | 5 | 10 | 30 | 60 | 120 | 300`
- **num** (Number) Indicates the rate limit value. This value identifies the number of requests that will trigger rate limiting. \
The rate limit formula is calculated through the num and duration_sec properties as indicated below. \
`num` requests per `duration_sec`

### Optional

- **account_number** (String) Identifies your account by its customer account number.
- **condition_group** (Block Set) Contains the set of condition groups associated with a rule. (see [below for nested schema](#nestedblock--condition_group))
- **disabled** (Boolean) Indicates whether this rate rule will be enforced. \
Valid values are: 
    * true: Disabled. This rate limit will not be applied to traffic.
    * false: Enabled. Traffic is restricted to this rate limit.
- **id** (String) The ID of this resource.
- **keys** (List of String) Indicates the method by requests will be grouped for the purposes of this rate rule. \
Valid values are: 
    * Missing / Empty Array: If the `keys` property is not defined or set to an empty array, all requests will be treated as a single group for the purpose of rate limiting. 
    * IP: Indicates that requests will be grouped by IP address. Each unique IP address is considered a separate group. 
    * USER_AGENT: Indicates that requests will be grouped by a client's user agent. Each unique combination of IP address and user agent is considered a separate group.
- **name** (String) Assigns a name to this access rule.

<a id="nestedblock--condition_group"></a>
### Nested Schema for `condition_group`

Optional:

- **condition** (Block List) Contains a list of match conditions. (see [below for nested schema](#nestedblock--condition_group--condition))
- **id** (String) Indicates the system-defined alphanumeric ID of a condition group. Example: `12345678-90ab-cdef-ghij-klmnopqrstuvwxyz1`
- **name** (String) Indicates the name of a condition group.

<a id="nestedblock--condition_group--condition"></a>
### Nested Schema for `condition_group.condition`

Optional:

- **op** (Block Set, Max: 1) Contains the match condition's properties (see [below for nested schema](#nestedblock--condition_group--condition--op))
- **target** (Block Set, Max: 1) Describes the type of match condition. (see [below for nested schema](#nestedblock--condition_group--condition--target))

<a id="nestedblock--condition_group--condition--op"></a>
### Nested Schema for `condition_group.condition.op`

Required:

- **type** (String) Indicates how the system will interpret the comparison between the request and the `values` property. Valid values are: \
    * EM: Requires that the request's attribute be set to one of the value(s) defined in the `values` property. 
    * IPMATCH: Requires that the request's IP address either be contained by an IP block or be an exact match to an IP address defined in the `values` property. \
    *Note: Only use IPMATCH with the REMOTE_ADDR match condition.* 
    * RX: Requires that the request's attribute be an exact match to the regular expression defined in the `value` property.

Optional:

- **is_case_insensitive** (Boolean) Indicates whether the comparison between the request and the values property is case-sensitive.
- **is_negated** (Boolean) Indicates whether this match condition will be satisfied when the request matches or does not match the value defined by the values property.
- **value** (String) type: REQUEST_HEADERS Only \
Indicates the name of the request header through which requests will be identified. \
    Valid values are: `Host | Referer | User-Agent`
- **values** (List of String) type: EM and IPMATCH Only \
Identifies one or more values used to identify requests that are eligible for rate limiting. \
If you are identifying traffic via a URL path (REQUEST_URI), then you should specify a URL path pattern that starts directly after the hostname. Exclude a protocol or a hostname when defining this property. \
Sample values: \
    /marketing \
    /800001/mycustomerorigin \
*Note:If you are matching requests by IP address, make sure to use standard IPv4 and CIDR notation.*


<a id="nestedblock--condition_group--condition--target"></a>
### Nested Schema for `condition_group.condition.target`

Required:

- **type** (String) Determines how requests will be identified. \
    Valid values are: `FILE_EXT | REMOTE_ADDR | REQUEST_HEADERS | REQUEST_METHOD | REQUEST_URI`

Optional:

- **value** (String) type: REQUEST_HEADERS Only \
Indicates the name of the request header through which requests will be identified. \
    Valid values are: `Host | Referer | User-Agent`


